var __extends=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},spine;!function(a){var b=function(){function a(a,b,c){if(null==a)throw new Error("name cannot be null.");if(null==b)throw new Error("timelines cannot be null.");this.name=a,this.timelines=b,this.duration=c}return a.prototype.apply=function(a,b,c,d,e){if(null==a)throw new Error("skeleton cannot be null.");d&&0!=this.duration&&(c%=this.duration,b>0&&(b%=this.duration));for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},a.prototype.mix=function(a,b,c,d,e,f){if(null==a)throw new Error("skeleton cannot be null.");d&&0!=this.duration&&(c%=this.duration,b>0&&(b%=this.duration));for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)},a.binarySearch=function(a,b,c){void 0===c&&(c=1);var d=0,e=a.length/c-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},a.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},a}();a.Animation=b;var c=function(){function b(c){if(0>=c)throw new Error("frameCount must be > 0: "+c);this.curves=a.Utils.newFloatArray((c-1)*b.BEZIER_SIZE)}return b.prototype.getFrameCount=function(){return this.curves.length/b.BEZIER_SIZE+1},b.prototype.setLinear=function(a){this.curves[a*b.BEZIER_SIZE]=b.LINEAR},b.prototype.setStepped=function(a){this.curves[a*b.BEZIER_SIZE]=b.STEPPED},b.prototype.getCurveType=function(a){var c=a*b.BEZIER_SIZE;if(c==this.curves.length)return b.LINEAR;var d=this.curves[c];return d==b.LINEAR?b.LINEAR:d==b.STEPPED?b.STEPPED:b.BEZIER},b.prototype.setCurve=function(a,c,d,e,f){var g=.03*(2*-c+e),h=.03*(2*-d+f),i=.006*(3*(c-e)+1),j=.006*(3*(d-f)+1),k=2*g+i,l=2*h+j,m=.3*c+g+.16666667*i,n=.3*d+h+.16666667*j,o=a*b.BEZIER_SIZE,p=this.curves;p[o++]=b.BEZIER;for(var q=m,r=n,s=o+b.BEZIER_SIZE-1;s>o;o+=2)p[o]=q,p[o+1]=r,m+=k,n+=l,k+=i,l+=j,q+=m,r+=n},b.prototype.getCurvePercent=function(c,d){d=a.MathUtils.clamp(d,0,1);var e=this.curves,f=c*b.BEZIER_SIZE,g=e[f];if(g==b.LINEAR)return d;if(g==b.STEPPED)return 0;f++;for(var h=0,i=f,j=f+b.BEZIER_SIZE-1;j>f;f+=2)if(h=e[f],h>=d){var k=void 0,l=void 0;return f==i?(k=0,l=0):(k=e[f-2],l=e[f-1]),l+(e[f+1]-l)*(d-k)/(h-k)}var m=e[f-1];return m+(1-m)*(d-h)/(1-h)},b.LINEAR=0,b.STEPPED=1,b.BEZIER=2,b.BEZIER_SIZE=19,b}();a.CurveTimeline=c;var d=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b<<1)}return __extends(d,c),d.prototype.setFrame=function(a,b,c){a<<=1,this.frames[a]=b,this.frames[a+d.ROTATION]=c},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.bones[this.boneIndex];if(e>=h[h.length-d.ENTRIES]){for(var j=i.data.rotation+h[h.length+d.PREV_ROTATION]-i.rotation;j>180;)j-=360;for(;-180>j;)j+=360;return void(i.rotation+=j*g)}for(var k=b.binarySearch(h,e,d.ENTRIES),l=h[k+d.PREV_ROTATION],m=h[k],n=this.getCurvePercent((k>>1)-1,1-(e-m)/(h[k+d.PREV_TIME]-m)),o=h[k+d.ROTATION]-l;o>180;)o-=360;for(;-180>o;)o+=360;for(o=i.data.rotation+(l+o*n)-i.rotation;o>180;)o-=360;for(;-180>o;)o+=360;i.rotation+=o*g}},d.ENTRIES=2,d.PREV_TIME=-2,d.PREV_ROTATION=-1,d.ROTATION=1,d}(c);a.RotateTimeline=d;var e=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c,e){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.X]=c,this.frames[a+d.Y]=e},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.bones[this.boneIndex];if(e>=h[h.length-d.ENTRIES])return i.x+=(i.data.x+h[h.length+d.PREV_X]-i.x)*g,void(i.y+=(i.data.y+h[h.length+d.PREV_Y]-i.y)*g);var j=b.binarySearch(h,e,d.ENTRIES),k=h[j+d.PREV_X],l=h[j+d.PREV_Y],m=h[j],n=this.getCurvePercent(j/d.ENTRIES-1,1-(e-m)/(h[j+d.PREV_TIME]-m));i.x+=(i.data.x+k+(h[j+d.X]-k)*n-i.x)*g,i.y+=(i.data.y+l+(h[j+d.Y]-l)*n-i.y)*g}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_X=-2,d.PREV_Y=-1,d.X=1,d.Y=2,d}(c);a.TranslateTimeline=e;var f=function(a){function c(b){a.call(this,b)}return __extends(c,a),c.prototype.apply=function(a,d,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.bones[this.boneIndex];if(e>=h[h.length-c.ENTRIES])return i.scaleX+=(i.data.scaleX*h[h.length+c.PREV_X]-i.scaleX)*g,void(i.scaleY+=(i.data.scaleY*h[h.length+c.PREV_Y]-i.scaleY)*g);var j=b.binarySearch(h,e,c.ENTRIES),k=h[j+c.PREV_X],l=h[j+c.PREV_Y],m=h[j],n=this.getCurvePercent(j/c.ENTRIES-1,1-(e-m)/(h[j+c.PREV_TIME]-m));i.scaleX+=(i.data.scaleX*(k+(h[j+c.X]-k)*n)-i.scaleX)*g,i.scaleY+=(i.data.scaleY*(l+(h[j+c.Y]-l)*n)-i.scaleY)*g}},c}(e);a.ScaleTimeline=f;var g=function(a){function c(b){a.call(this,b)}return __extends(c,a),c.prototype.apply=function(a,d,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.bones[this.boneIndex];if(e>=h[h.length-c.ENTRIES])return i.shearX+=(i.data.shearX+h[h.length+c.PREV_X]-i.shearX)*g,void(i.shearY+=(i.data.shearY+h[h.length+c.PREV_Y]-i.shearY)*g);var j=b.binarySearch(h,e,c.ENTRIES),k=h[j+c.PREV_X],l=h[j+c.PREV_Y],m=h[j],n=this.getCurvePercent(j/c.ENTRIES-1,1-(e-m)/(h[j+c.PREV_TIME]-m));i.shearX+=(i.data.shearX+(k+(h[j+c.X]-k)*n)-i.shearX)*g,i.shearY+=(i.data.shearY+(l+(h[j+c.Y]-l)*n)-i.shearY)*g}},c}(e);a.ShearTimeline=g;var h=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c,e,f,g){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.R]=c,this.frames[a+d.G]=e,this.frames[a+d.B]=f,this.frames[a+d.A]=g},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=0,j=0,k=0,l=0;if(e>=h[h.length-d.ENTRIES]){var m=h.length;i=h[m+d.PREV_R],j=h[m+d.PREV_G],k=h[m+d.PREV_B],l=h[m+d.PREV_A]}else{var n=b.binarySearch(h,e,d.ENTRIES);i=h[n+d.PREV_R],j=h[n+d.PREV_G],k=h[n+d.PREV_B],l=h[n+d.PREV_A];var o=h[n],p=this.getCurvePercent(n/d.ENTRIES-1,1-(e-o)/(h[n+d.PREV_TIME]-o));i+=(h[n+d.R]-i)*p,j+=(h[n+d.G]-j)*p,k+=(h[n+d.B]-k)*p,l+=(h[n+d.A]-l)*p}var q=a.slots[this.slotIndex].color;1>g?q.add((i-q.r)*g,(j-q.g)*g,(k-q.b)*g,(l-q.a)*g):q.set(i,j,k,l)}},d.ENTRIES=5,d.PREV_TIME=-5,d.PREV_R=-4,d.PREV_G=-3,d.PREV_B=-2,d.PREV_A=-1,d.R=1,d.G=2,d.B=3,d.A=4,d}(c);a.ColorTimeline=h;var i=function(){function c(b){this.frames=a.Utils.newFloatArray(b),this.attachmentNames=new Array(b)}return c.prototype.getFrameCount=function(){return this.frames.length},c.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},c.prototype.apply=function(a,c,d,e,f){var g=this.frames;if(!(d<g[0])){var h=0;h=d>=g[g.length-1]?g.length-1:b.binarySearch(g,d,1)-1;var i=this.attachmentNames[h];a.slots[this.slotIndex].setAttachment(null==i?null:a.getAttachment(this.slotIndex,i))}},c}();a.AttachmentTimeline=i;var j=function(){function c(b){this.frames=a.Utils.newFloatArray(b),this.events=new Array(b)}return c.prototype.getFrameCount=function(){return this.frames.length},c.prototype.setFrame=function(a,b){this.frames[a]=b.time,this.events[a]=b},c.prototype.apply=function(a,c,d,e,f){if(null!=e){var g=this.frames,h=this.frames.length;if(c>d)this.apply(a,c,Number.MAX_VALUE,e,f),c=-1;else if(c>=g[h-1])return;if(!(d<g[0])){var i=0;if(c<g[0])i=0;else{i=b.binarySearch(g,c);for(var j=g[i];i>0&&g[i-1]==j;)i--}for(;h>i&&d>=g[i];i++)e.push(this.events[i])}}},c}();a.EventTimeline=j;var k=function(){function c(b){this.frames=a.Utils.newFloatArray(b),this.drawOrders=new Array(b)}return c.prototype.getFrameCount=function(){return this.frames.length},c.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},c.prototype.apply=function(c,d,e,f,g){var h=this.frames;if(!(e<h[0])){var i=0;i=e>=h[h.length-1]?h.length-1:b.binarySearch(h,e)-1;var j=c.drawOrder,k=c.slots,l=this.drawOrders[i];if(null==l)a.Utils.arrayCopy(k,0,j,0,k.length);else for(var m=0,n=l.length;n>m;m++)j[m]=k[l[m]]}},c}();a.DrawOrderTimeline=k;var l=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b),this.frameVertices=new Array(b)}return __extends(d,c),d.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},d.prototype.apply=function(c,d,e,f,g){var h=c.slots[this.slotIndex],i=h.getAttachment();if(i instanceof a.VertexAttachment&&i.applyDeform(this.attachment)){var j=this.frames;if(!(e<j[0])){var k=this.frameVertices,l=k[0].length,m=h.attachmentVertices;m.length!=l&&(g=1);var n=a.Utils.setArraySize(m,l);if(e>=j[j.length-1]){var o=k[j.length-1];if(1>g)for(var p=0;l>p;p++)n[p]+=(o[p]-n[p])*g;else a.Utils.arrayCopy(o,0,n,0,l)}else{var q=b.binarySearch(j,e),r=k[q-1],s=k[q],t=j[q],u=this.getCurvePercent(q-1,1-(e-t)/(j[q-1]-t));if(1>g)for(var p=0;l>p;p++){var v=r[p];n[p]+=(v+(s[p]-v)*u-n[p])*g}else for(var p=0;l>p;p++){var v=r[p];n[p]=v+(s[p]-v)*u}}}}},d}(c);a.DeformTimeline=l;var m=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c,e){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.MIX]=c,this.frames[a+d.BEND_DIRECTION]=e},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.ikConstraints[this.ikConstraintIndex];if(e>=h[h.length-d.ENTRIES])return i.mix+=(h[h.length+d.PREV_MIX]-i.mix)*g,void(i.bendDirection=Math.floor(h[h.length+d.PREV_BEND_DIRECTION]));var j=b.binarySearch(h,e,d.ENTRIES),k=h[j+d.PREV_MIX],l=h[j],m=this.getCurvePercent(j/d.ENTRIES-1,1-(e-l)/(h[j+d.PREV_TIME]-l));i.mix+=(k+(h[j+d.MIX]-k)*m-i.mix)*g,i.bendDirection=Math.floor(h[j+d.PREV_BEND_DIRECTION])}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_MIX=-2,d.PREV_BEND_DIRECTION=-1,d.MIX=1,d.BEND_DIRECTION=2,d}(c);a.IkConstraintTimeline=m;var n=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c,e,f,g){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.ROTATE]=c,this.frames[a+d.TRANSLATE]=e,this.frames[a+d.SCALE]=f,this.frames[a+d.SHEAR]=g},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.transformConstraints[this.transformConstraintIndex];if(e>=h[h.length-d.ENTRIES]){var j=h.length;return i.rotateMix+=(h[j+d.PREV_ROTATE]-i.rotateMix)*g,i.translateMix+=(h[j+d.PREV_TRANSLATE]-i.translateMix)*g,i.scaleMix+=(h[j+d.PREV_SCALE]-i.scaleMix)*g,void(i.shearMix+=(h[j+d.PREV_SHEAR]-i.shearMix)*g)}var k=b.binarySearch(h,e,d.ENTRIES),l=h[k],m=this.getCurvePercent(k/d.ENTRIES-1,1-(e-l)/(h[k+d.PREV_TIME]-l)),n=h[k+d.PREV_ROTATE],o=h[k+d.PREV_TRANSLATE],p=h[k+d.PREV_SCALE],q=h[k+d.PREV_SHEAR];i.rotateMix+=(n+(h[k+d.ROTATE]-n)*m-i.rotateMix)*g,i.translateMix+=(o+(h[k+d.TRANSLATE]-o)*m-i.translateMix)*g,i.scaleMix+=(p+(h[k+d.SCALE]-p)*m-i.scaleMix)*g,i.shearMix+=(q+(h[k+d.SHEAR]-q)*m-i.shearMix)*g}},d.ENTRIES=5,d.PREV_TIME=-5,d.PREV_ROTATE=-4,d.PREV_TRANSLATE=-3,d.PREV_SCALE=-2,d.PREV_SHEAR=-1,d.ROTATE=1,d.TRANSLATE=2,d.SCALE=3,d.SHEAR=4,d}(c);a.TransformConstraintTimeline=n;var o=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.VALUE]=c},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.pathConstraints[this.pathConstraintIndex];if(e>=h[h.length-d.ENTRIES]){var j=h.length;return void(i.position+=(h[j+d.PREV_VALUE]-i.position)*g)}var k=b.binarySearch(h,e,d.ENTRIES),l=h[k+d.PREV_VALUE],m=h[k],n=this.getCurvePercent(k/d.ENTRIES-1,1-(e-m)/(h[k+d.PREV_TIME]-m));i.position+=(l+(h[k+d.VALUE]-l)*n-i.position)*g}},d.ENTRIES=2,d.PREV_TIME=-2,d.PREV_VALUE=-1,d.VALUE=1,d}(c);a.PathConstraintPositionTimeline=o;var p=function(a){function c(b){a.call(this,b)}return __extends(c,a),c.prototype.apply=function(a,d,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.pathConstraints[this.pathConstraintIndex];if(e>=h[h.length-c.ENTRIES]){var j=h.length;return void(i.spacing+=(h[j+c.PREV_VALUE]-i.spacing)*g)}var k=b.binarySearch(h,e,c.ENTRIES),l=h[k+c.PREV_VALUE],m=h[k],n=this.getCurvePercent(k/c.ENTRIES-1,1-(e-m)/(h[k+c.PREV_TIME]-m));i.spacing+=(l+(h[k+c.VALUE]-l)*n-i.spacing)*g}},c}(o);a.PathConstraintSpacingTimeline=p;var q=function(c){function d(b){c.call(this,b),this.frames=a.Utils.newFloatArray(b*d.ENTRIES)}return __extends(d,c),d.prototype.setFrame=function(a,b,c,e){a*=d.ENTRIES,this.frames[a]=b,this.frames[a+d.ROTATE]=c,this.frames[a+d.TRANSLATE]=e},d.prototype.apply=function(a,c,e,f,g){var h=this.frames;if(!(e<h[0])){var i=a.pathConstraints[this.pathConstraintIndex];if(e>=h[h.length-d.ENTRIES]){var j=h.length;return i.rotateMix+=(h[j+d.PREV_ROTATE]-i.rotateMix)*g,void(i.translateMix+=(h[j+d.PREV_TRANSLATE]-i.translateMix)*g)}var k=b.binarySearch(h,e,d.ENTRIES),l=h[k+d.PREV_ROTATE],m=h[k+d.PREV_TRANSLATE],n=h[k],o=this.getCurvePercent(k/d.ENTRIES-1,1-(e-n)/(h[k+d.PREV_TIME]-n));i.rotateMix+=(l+(h[k+d.ROTATE]-l)*o-i.rotateMix)*g,i.translateMix+=(m+(h[k+d.TRANSLATE]-m)*o-i.translateMix)*g}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_ROTATE=-2,d.PREV_TRANSLATE=-1,d.ROTATE=1,d.TRANSLATE=2,d}(c);a.PathConstraintMixTimeline=q}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a){if(void 0===a&&(a=null),this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.timeScale=1,null==a)throw new Error("data cannot be null.");this.data=a}return b.prototype.update=function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(null!=c){var d=c.next;if(null!=d){var e=c.lastTime-d.delay;if(e>=0){var f=a*d.timeScale;d.time=e+f,c.time+=a*c.timeScale,this.setCurrent(b,d),d.time-=f,c=d}}else if(!c.loop&&c.lastTime>=c.endTime){this.clearTrack(b);continue}if(c.time+=a*c.timeScale,null!=c.previous){var g=a*c.previous.timeScale;c.previous.time+=g,c.mixTime+=g}}}},b.prototype.apply=function(b){for(var c=this.events,d=this.listeners.length,e=0;e<this.tracks.length;e++){var f=this.tracks[e];if(null!=f){c.length=0;var g=f.time,h=f.lastTime,i=f.endTime,j=f.loop;!j&&g>i&&(g=i);var k=f.previous;if(null==k)f.animation.mix(b,h,g,j,c,f.mix);else{var l=k.time;!k.loop&&l>k.endTime&&(l=k.endTime),k.animation.apply(b,l,l,k.loop,null);var m=f.mixTime/f.mixDuration*f.mix;m>=1&&(m=1,f.previous=null),f.animation.mix(b,h,g,j,c,m)}for(var n=0,o=c.length;o>n;n++){var p=c[n];null!=f.listener&&f.listener.event(e,p);for(var q=0;d>q;q++)this.listeners[q].event(e,p)}if(j?h%i>g%i:i>h&&g>=i){var r=a.MathUtils.toInt(g/i);null!=f.listener&&f.listener.complete(e,r);for(var n=0,o=this.listeners.length;o>n;n++)this.listeners[n].complete(e,r)}f.lastTime=f.time}}},b.prototype.clearTracks=function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},b.prototype.clearTrack=function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];if(null!=b){null!=b.listener&&b.listener.end(a);for(var c=0,d=this.listeners.length;d>c;c++)this.listeners[c].end(a);this.tracks[a]=null,this.freeAll(b)}}},b.prototype.freeAll=function(a){for(;null!=a;){var b=a.next;a=b}},b.prototype.expandToIndex=function(b){return b<this.tracks.length?this.tracks[b]:(a.Utils.setArraySize(this.tracks,b-this.tracks.length+1,null),this.tracks.length=b+1,null)},b.prototype.setCurrent=function(a,b){var c=this.expandToIndex(a);if(null!=c){var d=c.previous;c.previous=null,null!=c.listener&&c.listener.end(a);for(var e=0,f=this.listeners.length;f>e;e++)this.listeners[e].end(a);b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,null!=d&&c.mixTime/c.mixDuration<.5?(b.previous=d,d=c):b.previous=c)}this.tracks[a]=b,null!=b.listener&&b.listener.start(a);for(var e=0,f=this.listeners.length;f>e;e++)this.listeners[e].start(a)},b.prototype.setAnimation=function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(null==d)throw new Error("Animation not found: "+b);return this.setAnimationWith(a,d,c)},b.prototype.setAnimationWith=function(a,b,d){var e=this.expandToIndex(a);null!=e&&this.freeAll(e.next);var f=new c;return f.animation=b,f.loop=d,f.endTime=b.duration,this.setCurrent(a,f),f},b.prototype.addAnimation=function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(null==e)throw new Error("Animation not found: "+b);return this.addAnimationWith(a,e,c,d)},b.prototype.addAnimationWith=function(a,b,d,e){var f=new c;f.animation=b,f.loop=d,f.endTime=b.duration;var g=this.expandToIndex(a);if(null!=g){for(;null!=g.next;)g=g.next;g.next=f}else this.tracks[a]=f;return 0>=e&&(null!=g?e+=g.endTime-this.data.getMix(g.animation,b):e=0),f.delay=e,f},b.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},b.prototype.addListener=function(a){if(null==a)throw new Error("listener cannot be null.");this.listeners.push(a)},b.prototype.removeListener=function(a){var b=this.listeners.indexOf(a);b>=0&&this.listeners.splice(b,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b}();a.AnimationState=b;var c=function(){function a(){this.loop=!1,this.delay=0,this.time=0,this.lastTime=-1,this.endTime=0,this.timeScale=1,this.mixTime=0,this.mixDuration=0,this.mix=1}return a.prototype.reset=function(){this.next=null,this.previous=null,this.animation=null,this.listener=null,this.timeScale=1,this.lastTime=-1,this.time=0},a.prototype.isComplete=function(){return this.time>=this.endTime},a}();a.TrackEntry=c;var d=function(){function a(){}return a.prototype.event=function(a,b){},a.prototype.complete=function(a,b){},a.prototype.start=function(a){},a.prototype.end=function(a){},a}();a.AnimationStateAdapter=d}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){if(this.animationToMixTime={},this.defaultMix=0,null==a)throw new Error("skeletonData cannot be null.");this.skeletonData=a}return a.prototype.setMix=function(a,b,c){var d=this.skeletonData.findAnimation(a);if(null==d)throw new Error("Animation not found: "+a);var e=this.skeletonData.findAnimation(b);if(null==e)throw new Error("Animation not found: "+b);this.setMixWith(d,e,c)},a.prototype.setMixWith=function(a,b,c){if(null==a)throw new Error("from cannot be null.");if(null==b)throw new Error("to cannot be null.");var d=a.name+b.name;this.animationToMixTime[d]=c},a.prototype.getMix=function(a,b){var c=a.name+b.name,d=this.animationToMixTime[c];return void 0===d?this.defaultMix:d},a}();a.AnimationStateData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a,b){void 0===b&&(b=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=a,this.pathPrefix=b}return a.prototype.loadText=function(a,b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=null),a=this.pathPrefix+a,this.toLoad++;var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&(e.status>=200&&e.status<300?(b&&b(a,e.responseText),d.assets[a]=e.responseText):(c&&c(a,"Couldn't load text "+a+": status "+e.status+", "+e.responseText),d.errors[a]="Couldn't load text "+a+": status "+e.status+", "+e.responseText),d.toLoad--,d.loaded++)},e.open("GET",a,!0),e.send()},a.prototype.loadTexture=function(a,b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=null),a=this.pathPrefix+a,this.toLoad++;var e=new Image;e.src=a,e.crossOrigin="anonymous",e.onload=function(c){b&&b(a,e);var f=d.textureLoader(e);d.assets[a]=f,d.toLoad--,d.loaded++},e.onerror=function(b){c&&c(a,"Couldn't load image "+a),d.errors[a]="Couldn't load image "+a,d.toLoad--,d.loaded++}},a.prototype.get=function(a){return a=this.pathPrefix+a,this.assets[a]},a.prototype.remove=function(a){a=this.pathPrefix+a;var b=this.assets[a];b.dispose&&b.dispose(),this.assets[a]=null},a.prototype.removeAll=function(){for(var a in this.assets){var b=this.assets[a];b.dispose&&b.dispose()}this.assets={}},a.prototype.isLoadingComplete=function(){return 0==this.toLoad},a.prototype.getToLoad=function(){return this.toLoad},a.prototype.getLoaded=function(){return this.loaded},a.prototype.dispose=function(){this.removeAll()},a.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},a.prototype.getErrors=function(){return this.errors},a}();a.AssetManager=b}(spine||(spine={}));var spine;!function(a){!function(a){a[a.Normal=0]="Normal",a[a.Additive=1]="Additive",a[a.Multiply=2]="Multiply",a[a.Screen=3]="Screen"}(a.BlendMode||(a.BlendMode={}));a.BlendMode}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a,b,c){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.appliedRotation=0,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.worldSignX=0,this.worldSignY=0,this.sorted=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()}return b.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransformWith=function(b,c,d,e,f,g,h){this.appliedRotation=d;var i=d+90+h,j=a.MathUtils.cosDeg(d+g)*e,k=a.MathUtils.cosDeg(i)*f,l=a.MathUtils.sinDeg(d+g)*e,m=a.MathUtils.sinDeg(i)*f,n=this.parent;if(null==n){var o=this.skeleton;return o.flipX&&(b=-b,j=-j,k=-k),o.flipY&&(c=-c,l=-l,m=-m),this.a=j,this.b=k,this.c=l,this.d=m,this.worldX=b,this.worldY=c,this.worldSignX=a.MathUtils.signum(e),void(this.worldSignY=a.MathUtils.signum(f))}var p=n.a,q=n.b,r=n.c,s=n.d;if(this.worldX=p*b+q*c+n.worldX,this.worldY=r*b+s*c+n.worldY,this.worldSignX=n.worldSignX*a.MathUtils.signum(e),this.worldSignY=n.worldSignY*a.MathUtils.signum(f),this.data.inheritRotation&&this.data.inheritScale)this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m;else{if(this.data.inheritRotation){p=1,q=0,r=0,s=1;do{var t=a.MathUtils.cosDeg(n.appliedRotation),u=a.MathUtils.sinDeg(n.appliedRotation),v=p*t+q*u;if(q=q*t-p*u,p=v,v=r*t+s*u,s=s*t-r*u,r=v,!n.data.inheritRotation)break;n=n.parent}while(null!=n);this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m}else if(this.data.inheritScale){p=1,q=0,r=0,s=1;do{var t=a.MathUtils.cosDeg(n.appliedRotation),u=a.MathUtils.sinDeg(n.appliedRotation),w=n.scaleX,x=n.scaleY,y=t*w,z=u*x,A=u*w,B=t*x,v=p*y+q*A;if(q=q*B-p*z,p=v,v=r*y+s*A,s=s*B-r*z,r=v,w>=0&&(u=-u),v=p*t+q*u,q=q*t-p*u,p=v,v=r*t+s*u,s=s*t-r*u,r=v,!n.data.inheritScale)break;n=n.parent}while(null!=n);this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m}else this.a=j,this.b=k,this.c=l,this.d=m;this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)}},b.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},b.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*a.MathUtils.radDeg},b.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*a.MathUtils.radDeg},b.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.b*this.b)*this.worldSignX},b.prototype.getWorldScaleY=function(){return Math.sqrt(this.c*this.c+this.d*this.d)*this.worldSignY},b.prototype.worldToLocalRotationX=function(){var b=this.parent;if(null==b)return this.rotation;var c=b.a,d=b.b,e=b.c,f=b.d,g=this.a,h=this.c;return Math.atan2(c*h-e*g,f*g-d*h)*a.MathUtils.radDeg},b.prototype.worldToLocalRotationY=function(){var b=this.parent;if(null==b)return this.rotation;var c=b.a,d=b.b,e=b.c,f=b.d,g=this.b,h=this.d;return Math.atan2(c*h-e*g,f*g-d*h)*a.MathUtils.radDeg},b.prototype.rotateWorld=function(b){var c=this.a,d=this.b,e=this.c,f=this.d,g=a.MathUtils.cosDeg(b),h=a.MathUtils.sinDeg(b);this.a=g*c-h*e,this.b=g*d-h*f,this.c=h*c+g*e,this.d=h*d+g*f},b.prototype.updateLocalTransform=function(){var b=this.parent;if(null==b){this.x=this.worldX,this.y=this.worldY,this.rotation=Math.atan2(this.c,this.a)*a.MathUtils.radDeg,this.scaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.scaleY=Math.sqrt(this.b*this.b+this.d*this.d);var c=this.a*this.d-this.b*this.c;return this.shearX=0,void(this.shearY=Math.atan2(this.a*this.b+this.c*this.d,c)*a.MathUtils.radDeg)}var d=b.a,e=b.b,f=b.c,g=b.d,h=1/(d*g-e*f),i=this.worldX-b.worldX,j=this.worldY-b.worldY;this.x=i*g*h-j*e*h,this.y=j*d*h-i*f*h;var k=h*g,l=h*d,m=h*e,n=h*f,o=k*this.a-m*this.c,p=k*this.b-m*this.d,q=l*this.c-n*this.a,r=l*this.d-n*this.b;if(this.shearX=0,this.scaleX=Math.sqrt(o*o+q*q),this.scaleX>1e-4){var c=o*r-p*q;this.scaleY=c/this.scaleX,this.shearY=Math.atan2(o*p+q*r,c)*a.MathUtils.radDeg,this.rotation=Math.atan2(q,o)*a.MathUtils.radDeg}else this.scaleX=0,this.scaleY=Math.sqrt(p*p+r*r),this.shearY=0,this.rotation=90-Math.atan2(r,p)*a.MathUtils.radDeg;this.appliedRotation=this.rotation},b.prototype.worldToLocal=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=1/(b*e-c*d),g=a.x-this.worldX,h=a.y-this.worldY;return a.x=g*e*f-h*c*f,a.y=h*b*f-g*d*f,a},b.prototype.localToWorld=function(a){var b=a.x,c=a.y;return a.x=b*this.a+c*this.b+this.worldX,a.y=b*this.c+c*this.d+this.worldY,a},b}();a.Bone=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a,b,c){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.inheritRotation=!0,this.inheritScale=!0,0>a)throw new Error("index must be >= 0.");if(null==b)throw new Error("name cannot be null.");this.index=a,this.name=b,this.parent=c}return a}();a.BoneData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a,b){if(null==b)throw new Error("data cannot be null.");this.time=a,this.data=b}return a}();a.Event=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){this.name=a}return a}();a.EventData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a,b){if(this.mix=1,this.bendDirection=0,this.level=0,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){var a=this.target,b=this.bones;switch(b.length){case 1:this.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:this.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix)}},b.prototype.apply1=function(b,c,d,e){var f=b.parent,g=1/(f.a*f.d-f.b*f.c),h=c-f.worldX,i=d-f.worldY,j=(h*f.d-i*f.b)*g-b.x,k=(i*f.a-h*f.c)*g-b.y,l=Math.atan2(k,j)*a.MathUtils.radDeg-b.shearX-b.rotation;b.scaleX<0&&(l+=180),l>180?l-=360:-180>l&&(l+=360),b.updateWorldTransformWith(b.x,b.y,b.rotation+l*e,b.scaleX,b.scaleY,b.shearX,b.shearY)},b.prototype.apply2=function(b,c,d,e,f,g){if(0==g)return void c.updateWorldTransform();var h=b.x,i=b.y,j=b.scaleX,k=b.scaleY,l=c.scaleX,m=0,n=0,o=0;0>j?(j=-j,m=180,o=-1):(m=0,o=1),0>k&&(k=-k,o=-o),0>l?(l=-l,n=180):n=0;var p=c.x,q=0,r=0,s=0,t=b.a,u=b.b,v=b.c,w=b.d,x=Math.abs(j-k)<=1e-4;x?(q=c.y,r=t*p+u*q+b.worldX,s=v*p+w*q+b.worldY):(q=0,r=t*p+b.worldX,s=v*p+b.worldY);var y=b.parent;t=y.a,u=y.b,v=y.c,w=y.d;var z=1/(t*w-u*v),A=d-y.worldX,B=e-y.worldY,C=(A*w-B*u)*z-h,D=(B*t-A*v)*z-i;A=r-y.worldX,B=s-y.worldY;var E=(A*w-B*u)*z-h,F=(B*t-A*v)*z-i,G=Math.sqrt(E*E+F*F),H=c.data.length*l,I=0,J=0;a:if(x){H*=j;var K=(C*C+D*D-G*G-H*H)/(2*G*H);-1>K?K=-1:K>1&&(K=1),J=Math.acos(K)*f,t=G+H*K,u=H*Math.sin(J),I=Math.atan2(D*t-C*u,C*t+D*u)}else{t=j*H,u=k*H;var L=t*t,M=u*u,N=C*C+D*D,O=Math.atan2(D,C);v=M*G*G+L*N-L*M;var P=-2*M*G,Q=M-L;if(w=P*P-4*Q*v,w>=0){var R=Math.sqrt(w);0>P&&(R=-R),R=-(P+R)/2;var S=R/Q,T=v/R,U=Math.abs(S)<Math.abs(T)?S:T;if(N>=U*U){B=Math.sqrt(N-U*U)*f,I=O-Math.atan2(B,U),J=Math.atan2(B/k,(U-G)/j);break a}}var V=0,W=Number.MAX_VALUE,X=0,Y=0,Z=0,$=0,_=0,aa=0;A=G+t,w=A*A,w>$&&(Z=0,$=w,_=A),A=G-t,w=A*A,W>w&&(V=a.MathUtils.PI,W=w,X=A);var ba=Math.acos(-t*G/(L-M));A=t*Math.cos(ba)+G,B=u*Math.sin(ba),w=A*A+B*B,W>w&&(V=ba,W=w,X=A,Y=B),w>$&&(Z=ba,$=w,_=A,aa=B),(W+$)/2>=N?(I=O-Math.atan2(Y*f,X),J=V*f):(I=O-Math.atan2(aa*f,_),J=Z*f)}var ca=Math.atan2(q,p)*o,da=b.rotation;I=(I-ca)*a.MathUtils.radDeg+m-da,I>180?I-=360:-180>I&&(I+=360),b.updateWorldTransformWith(h,i,da+I*g,b.scaleX,b.scaleY,0,0),da=c.rotation,J=((J+ca)*a.MathUtils.radDeg-c.shearX)*o+n-da,J>180?J-=360:-180>J&&(J+=360),c.updateWorldTransformWith(p,q,da+J*g,c.scaleX,c.scaleY,c.shearX,c.shearY)},b}();a.IkConstraint=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=a}return a}();a.IkConstraintData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a,b){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var c=0,d=a.bones.length;d>c;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findSlot(a.target.name),this.position=a.position,this.spacing=a.spacing,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){var b=this.target.getAttachment();if(b instanceof a.PathAttachment){var c=this.rotateMix,d=this.translateMix,e=d>0,f=c>0;if(e||f){var g=this.data,h=g.spacingMode,i=h==a.SpacingMode.Length,j=g.rotateMode,k=j==a.RotateMode.Tangent,l=j==a.RotateMode.ChainScale,m=this.bones.length,n=k?m:m+1,o=this.bones,p=a.Utils.setArraySize(this.spaces,n),q=null,r=this.spacing;if(l||i){l&&(q=a.Utils.setArraySize(this.lengths,m));for(var s=0,t=n-1;t>s;){var u=o[s],v=u.data.length,w=v*u.a,x=v*u.c;v=Math.sqrt(w*w+x*x),l&&(q[s]=v),p[++s]=i?Math.max(0,v+r):r}}else for(var s=1;n>s;s++)p[s]=r;for(var y=this.computeWorldPositions(b,n,k,g.positionMode==a.PositionMode.Percent,h==a.SpacingMode.Percent),z=this.target.bone.skeleton,A=z.x,B=z.y,C=y[0],D=y[1],E=g.offsetRotation,F=j==a.RotateMode.Chain&&0==E,s=0,G=3;m>s;s++,G+=3){var u=o[s];u.worldX+=(C-A-u.worldX)*d,u.worldY+=(D-B-u.worldY)*d;var w=y[G],x=y[G+1],H=w-C,I=x-D;if(l){var J=q[s];if(0!=J){var K=(Math.sqrt(H*H+I*I)/J-1)*c+1;u.a*=K,u.c*=K}}if(C=w,D=x,f){var L=u.a,M=u.b,N=u.c,O=u.d,P=0,Q=0,R=0;if(P=k?y[G-1]:0==p[s+1]?y[G+2]:Math.atan2(I,H),P-=Math.atan2(N,L)-E*a.MathUtils.degRad,F){Q=Math.cos(P),R=Math.sin(P);var S=u.data.length;C+=(S*(Q*L-R*N)-H)*c,D+=(S*(R*L+Q*N)-I)*c}P>a.MathUtils.PI?P-=a.MathUtils.PI2:P<-a.MathUtils.PI&&(P+=a.MathUtils.PI2),P*=c,Q=Math.cos(P),R=Math.sin(P),u.a=Q*L-R*N,u.b=Q*M-R*O,u.c=R*L+Q*N,u.d=R*M+Q*O}}}}},b.prototype.computeWorldPositions=function(c,d,e,f,g){var h=this.target,i=this.position,j=this.spaces,k=a.Utils.setArraySize(this.positions,3*d+2),l=null,m=c.closed,n=c.worldVerticesLength,o=n/6,p=b.NONE;if(!c.constantSpeed){var q=c.lengths;o-=m?1:2;var r=q[o];if(f&&(i*=r),g)for(var s=0;d>s;s++)j[s]*=r;l=a.Utils.setArraySize(this.world,8);for(var s=0,t=0,u=0;d>s;s++,t+=3){var v=j[s];i+=v;var w=i;if(m)w%=r,0>w&&(w+=r),u=0;else{if(0>w){p!=b.BEFORE&&(p=b.BEFORE,c.computeWorldVerticesWith(h,2,4,l,0)),this.addBeforePosition(w,l,0,k,t);continue}if(w>r){p!=b.AFTER&&(p=b.AFTER,c.computeWorldVerticesWith(h,n-6,4,l,0)),this.addAfterPosition(w-r,l,0,k,t);continue}}for(;;u++){var x=q[u];if(!(w>x)){if(0==u)w/=x;else{var y=q[u-1];w=(w-y)/(x-y)}break}}u!=p&&(p=u,m&&u==o?(c.computeWorldVerticesWith(h,n-4,4,l,0),c.computeWorldVerticesWith(h,0,4,l,4)):c.computeWorldVerticesWith(h,6*u+2,8,l,0)),this.addCurvePosition(w,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],k,t,e||s>0&&0==v)}return k}m?(n+=2,l=a.Utils.setArraySize(this.world,n),c.computeWorldVerticesWith(h,2,n-4,l,0),c.computeWorldVerticesWith(h,0,2,l,n-4),l[n-2]=l[0],l[n-1]=l[1]):(o--,n-=4,l=a.Utils.setArraySize(this.world,n),c.computeWorldVerticesWith(h,2,n,l,0));for(var z=a.Utils.setArraySize(this.curves,o),A=0,B=l[0],C=l[1],D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,s=0,R=2;o>s;s++,
R+=6)D=l[R],E=l[R+1],F=l[R+2],G=l[R+3],H=l[R+4],I=l[R+5],J=.1875*(B-2*D+F),K=.1875*(C-2*E+G),L=.09375*(3*(D-F)-B+H),M=.09375*(3*(E-G)-C+I),N=2*J+L,O=2*K+M,P=.75*(D-B)+J+.16666667*L,Q=.75*(E-C)+K+.16666667*M,A+=Math.sqrt(P*P+Q*Q),P+=N,Q+=O,N+=L,O+=M,A+=Math.sqrt(P*P+Q*Q),P+=N,Q+=O,A+=Math.sqrt(P*P+Q*Q),P+=N+L,Q+=O+M,A+=Math.sqrt(P*P+Q*Q),z[s]=A,B=H,C=I;if(f&&(i*=A),g)for(var s=0;d>s;s++)j[s]*=A;for(var S=this.segments,T=0,s=0,t=0,u=0,U=0;d>s;s++,t+=3){var v=j[s];i+=v;var w=i;if(m)w%=A,0>w&&(w+=A),u=0;else{if(0>w){this.addBeforePosition(w,l,0,k,t);continue}if(w>A){this.addAfterPosition(w-A,l,n-4,k,t);continue}}for(;;u++){var V=z[u];if(!(w>V)){if(0==u)w/=V;else{var y=z[u-1];w=(w-y)/(V-y)}break}}if(u!=p){p=u;var W=6*u;for(B=l[W],C=l[W+1],D=l[W+2],E=l[W+3],F=l[W+4],G=l[W+5],H=l[W+6],I=l[W+7],J=.03*(B-2*D+F),K=.03*(C-2*E+G),L=.006*(3*(D-F)-B+H),M=.006*(3*(E-G)-C+I),N=2*J+L,O=2*K+M,P=.3*(D-B)+J+.16666667*L,Q=.3*(E-C)+K+.16666667*M,T=Math.sqrt(P*P+Q*Q),S[0]=T,W=1;8>W;W++)P+=N,Q+=O,N+=L,O+=M,T+=Math.sqrt(P*P+Q*Q),S[W]=T;P+=N,Q+=O,T+=Math.sqrt(P*P+Q*Q),S[8]=T,P+=N+L,Q+=O+M,T+=Math.sqrt(P*P+Q*Q),S[9]=T,U=0}for(w*=T;;U++){var X=S[U];if(!(w>X)){if(0==U)w/=X;else{var y=S[U-1];w=U+(w-y)/(X-y)}break}}this.addCurvePosition(.1*w,B,C,D,E,F,G,H,I,k,t,e||s>0&&0==v)}return k},b.prototype.addBeforePosition=function(a,b,c,d,e){var f=b[c],g=b[c+1],h=b[c+2]-f,i=b[c+3]-g,j=Math.atan2(i,h);d[e]=f+a*Math.cos(j),d[e+1]=g+a*Math.sin(j),d[e+2]=j},b.prototype.addAfterPosition=function(a,b,c,d,e){var f=b[c+2],g=b[c+3],h=f-b[c],i=g-b[c+1],j=Math.atan2(i,h);d[e]=f+a*Math.cos(j),d[e+1]=g+a*Math.sin(j),d[e+2]=j},b.prototype.addCurvePosition=function(a,b,c,d,e,f,g,h,i,j,k,l){0==a&&(a=1e-4);var m=a*a,n=m*a,o=1-a,p=o*o,q=p*o,r=o*a,s=3*r,t=o*s,u=s*a,v=b*q+d*t+f*u+h*n,w=c*q+e*t+g*u+i*n;j[k]=v,j[k+1]=w,l&&(j[k+2]=Math.atan2(w-(c*p+e*r*2+g*m),v-(b*p+d*r*2+f*m)))},b.NONE=-1,b.BEFORE=-2,b.AFTER=-3,b}();a.PathConstraint=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){this.bones=new Array,this.name=a}return a}();a.PathConstraintData=b,function(a){a[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent"}(a.PositionMode||(a.PositionMode={}));a.PositionMode;!function(a){a[a.Length=0]="Length",a[a.Fixed=1]="Fixed",a[a.Percent=2]="Percent"}(a.SpacingMode||(a.SpacingMode={}));a.SpacingMode;!function(a){a[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(a.RotateMode||(a.RotateMode={}));a.RotateMode}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){this.toLoad=new Array,this.assets={},this.clientId=a}return a.prototype.loaded=function(){var a=0;for(var b in this.assets)a++;return a},a}(),c=function(){function a(a){void 0===a&&(a=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=a}return a.prototype.queueAsset=function(a,c,d){var e=this.clientAssets[a];return(null===e||void 0===e)&&(e=new b(a),this.clientAssets[a]=e),null!==c&&(e.textureLoader=c),e.toLoad.push(d),this.queuedAssets[d]===d?!1:(this.queuedAssets[d]=d,!0)},a.prototype.loadText=function(a,b){var c=this;if(b=this.pathPrefix+b,this.queueAsset(a,null,b)){var d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(d.status>=200&&d.status<300?c.rawAssets[b]=d.responseText:c.errors[b]="Couldn't load text "+b+": status "+d.status+", "+d.responseText)},d.open("GET",b,!0),d.send()}},a.prototype.loadJson=function(a,b){var c=this;if(b=this.pathPrefix+b,this.queueAsset(a,null,b)){var d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(d.status>=200&&d.status<300?c.rawAssets[b]=JSON.parse(d.responseText):c.errors[b]="Couldn't load text "+b+": status "+d.status+", "+d.responseText)},d.open("GET",b,!0),d.send()}},a.prototype.loadTexture=function(a,b,c){var d=this;if(c=this.pathPrefix+c,this.queueAsset(a,b,c)){var e=new Image;e.src=c,e.crossOrigin="anonymous",e.onload=function(a){d.rawAssets[c]=e},e.onerror=function(a){d.errors[c]="Couldn't load image "+c}}},a.prototype.get=function(a,b){b=this.pathPrefix+b;var c=this.clientAssets[a];return null===c||void 0===c?!0:c.assets[b]},a.prototype.updateClientAssets=function(a){for(var b=0;b<a.toLoad.length;b++){var c=a.toLoad[b],d=a.assets[c];if(null===d||void 0===d){var e=this.rawAssets[c];if(null===e||void 0===e)continue;e instanceof HTMLImageElement?a.assets[c]=a.textureLoader(e):a.assets[c]=e}}},a.prototype.isLoadingComplete=function(a){var b=this.clientAssets[a];return null===b||void 0===b?!0:(this.updateClientAssets(b),b.toLoad.length==b.loaded())},a.prototype.dispose=function(){},a.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},a.prototype.getErrors=function(){return this.errors},a}();a.SharedAssetManager=c}(spine||(spine={}));var spine;!function(a){var b=function(){function b(b){if(this._updateCache=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==b)throw new Error("data cannot be null.");this.data=b,this.bones=new Array;for(var c=0;c<b.bones.length;c++){var d=b.bones[c],e=void 0;if(null==d.parent)e=new a.Bone(d,this,null);else{var f=this.bones[d.parent.index];e=new a.Bone(d,this,f),f.children.push(e)}this.bones.push(e)}this.slots=new Array,this.drawOrder=new Array;for(var c=0;c<b.slots.length;c++){var g=b.slots[c],e=this.bones[g.boneData.index],h=new a.Slot(g,e);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=new Array,this.ikConstraintsSorted=new Array;for(var c=0;c<b.ikConstraints.length;c++){var i=b.ikConstraints[c];this.ikConstraints.push(new a.IkConstraint(i,this))}this.transformConstraints=new Array;for(var c=0;c<b.transformConstraints.length;c++){var j=b.transformConstraints[c];this.transformConstraints.push(new a.TransformConstraint(j,this))}this.pathConstraints=new Array;for(var c=0;c<b.pathConstraints.length;c++){var k=b.pathConstraints[c];this.pathConstraints.push(new a.PathConstraint(k,this))}this.color=new a.Color(1,1,1,1),this.updateCache()}return b.prototype.updateCache=function(){var b=this._updateCache;b.length=0;for(var c=this.bones,d=0,e=c.length;e>d;d++)c[d].sorted=!1;var f=this.ikConstraintsSorted;f.length=0;for(var d=0;d<this.ikConstraints.length;d++)f.push(this.ikConstraints[d]);for(var g=f.length,d=0,h=0,e=g;e>d;d++){var i=f[d],j=i.bones[0].parent;for(h=0;null!=j;h++)j=j.parent;i.level=h}for(var d=1,k=0;g>d;d++){var i=f[d],h=i.level;for(k=d-1;k>=0;k--){var l=f[k];if(l.level<h)break;f[k+1]=l}f[k+1]=i}for(var d=0,e=f.length;e>d;d++){var m=f[d],n=m.target;this.sortBone(n);var o=m.bones,p=o[0];this.sortBone(p),b.push(m),this.sortReset(p.children),o[o.length-1].sorted=!0}for(var q=this.pathConstraints,d=0,e=q.length;e>d;d++){var m=q[d],r=m.target,s=r.data.index,t=r.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,s,t),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,t);for(var k=0,u=this.data.skins.length;u>k;k++)this.sortPathConstraintAttachment(this.data.skins[k],s,t);var v=r.getAttachment();v instanceof a.PathAttachment&&this.sortPathConstraintAttachmentWith(v,t);for(var o=m.bones,w=o.length,k=0;w>k;k++)this.sortBone(o[k]);b.push(m);for(var k=0;w>k;k++)this.sortReset(o[k].children);for(var k=0;w>k;k++)o[k].sorted=!0}for(var x=this.transformConstraints,d=0,e=x.length;e>d;d++){var m=x[d];this.sortBone(m.target);for(var o=m.bones,w=o.length,k=0;w>k;k++)this.sortBone(o[k]);b.push(m);for(var k=0;w>k;k++)this.sortReset(o[k].children);for(var k=0;w>k;k++)o[k].sorted=!0}for(var d=0,e=c.length;e>d;d++)this.sortBone(c[d])},b.prototype.sortPathConstraintAttachment=function(a,b,c){var d=a.attachments[b];if(d)for(var e in d)this.sortPathConstraintAttachmentWith(d[e],c)},b.prototype.sortPathConstraintAttachmentWith=function(b,c){if(b instanceof a.PathAttachment){var d=b.bones;if(null==d)this.sortBone(c);else for(var e=this.bones,f=0;f<d.length;f++){var g=d[f];this.sortBone(e[g])}}},b.prototype.sortBone=function(a){if(!a.sorted){var b=a.parent;null!=b&&this.sortBone(b),a.sorted=!0,this._updateCache.push(a)}},b.prototype.sortReset=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.sorted&&this.sortReset(d.children),d.sorted=!1}},b.prototype.updateWorldTransform=function(){for(var a=this._updateCache,b=0,c=a.length;c>b;b++)a[b].update()},b.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},b.prototype.setBonesToSetupPose=function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose();for(var d=this.ikConstraints,b=0,c=d.length;c>b;b++){var e=d[b];e.bendDirection=e.data.bendDirection,e.mix=e.data.mix}for(var f=this.transformConstraints,b=0,c=f.length;c>b;b++){var e=f[b],g=e.data;e.rotateMix=g.rotateMix,e.translateMix=g.translateMix,e.scaleMix=g.scaleMix,e.shearMix=g.shearMix}for(var h=this.pathConstraints,b=0,c=h.length;c>b;b++){var e=h[b],g=e.data;e.position=g.position,e.spacing=g.spacing,e.rotateMix=g.rotateMix,e.translateMix=g.translateMix}},b.prototype.setSlotsToSetupPose=function(){var b=this.slots;a.Utils.arrayCopy(b,0,this.drawOrder,0,b.length);for(var c=0,d=b.length;d>c;c++)b[c].setToSetupPose()},b.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},b.prototype.findBone=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;d>c;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findBoneIndex=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},b.prototype.findSlot=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findSlotIndex=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},b.prototype.setSkinByName=function(a){var b=this.data.findSkin(a);if(null==b)throw new Error("Skin not found: "+a);this.setSkin(b)},b.prototype.setSkin=function(a){if(null!=a)if(null!=this.skin)a.attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c],f=e.data.attachmentName;if(null!=f){var g=a.getAttachment(c,f);null!=g&&e.setAttachment(g)}}this.skin=a},b.prototype.getAttachmentByName=function(a,b){return this.getAttachment(this.data.findSlotIndex(a),b)},b.prototype.getAttachment=function(a,b){if(null==b)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var c=this.skin.getAttachment(a,b);if(null!=c)return c}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},b.prototype.setAttachment=function(a,b){if(null==a)throw new Error("slotName cannot be null.");for(var c=this.slots,d=0,e=c.length;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(null!=b&&(g=this.getAttachment(d,b),null==g))throw new Error("Attachment not found: "+b+", for slot: "+a);return void f.setAttachment(g)}}throw new Error("Slot not found: "+a)},b.prototype.findIkConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findTransformConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.transformConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.findPathConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.data.name==a)return e}return null},b.prototype.getBounds=function(b,c){if(null==b)throw new Error("offset cannot be null.");if(null==c)throw new Error("size cannot be null.");for(var d=this.drawOrder,e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,i=0,j=d.length;j>i;i++){var k=d[i],l=null,m=k.getAttachment();if(m instanceof a.RegionAttachment?l=m.updateWorldVertices(k,!1):m instanceof a.MeshAttachment&&(l=m.updateWorldVertices(k,!0)),null!=l)for(var n=0,o=l.length;o>n;n+=8){var p=l[n],q=l[n+1];e=Math.min(e,p),f=Math.min(f,q),g=Math.max(g,p),h=Math.max(h,q)}}b.set(e,f),c.set(g-e,h-f)},b.prototype.update=function(a){this.time+=a},b}();a.Skeleton=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new a.Pool(function(){return a.Utils.newFloatArray(16)})}return b.prototype.update=function(b,c){if(null==b)throw new Error("skeleton cannot be null.");var d=this.boundingBoxes,e=this.polygons,f=this.polygonPool,g=b.slots,h=g.length;d.length=0,f.freeAll(e),e.length=0;for(var i=0;h>i;i++){var j=g[i],k=j.getAttachment();if(k instanceof a.BoundingBoxAttachment){var l=k;d.push(l);var m=f.obtain();m.length!=l.worldVerticesLength&&(m=a.Utils.newFloatArray(l.worldVerticesLength)),e.push(m),l.computeWorldVertices(j,m)}}c&&this.aabbCompute()},b.prototype.aabbCompute=function(){for(var a=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=this.polygons,f=0,g=e.length;g>f;f++)for(var h=e[f],i=h,j=0,k=h.length;k>j;j+=2){var l=i[j],m=i[j+1];a=Math.min(a,l),b=Math.min(b,m),c=Math.max(c,l),d=Math.max(d,m)}this.minX=a,this.minY=b,this.maxX=c,this.maxY=d},b.prototype.aabbContainsPoint=function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},b.prototype.aabbIntersectsSegment=function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},b.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},b.prototype.containsPoint=function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.containsPointPolygon(c[d],a,b))return this.boundingBoxes[d];return null},b.prototype.containsPointPolygon=function(a,b,c){for(var d=a,e=a.length,f=e-2,g=!1,h=0;e>h;h+=2){var i=d[h+1],j=d[f+1];if(c>i&&j>=c||c>j&&i>=c){var k=d[h];k+(c-i)/(j-i)*(d[f]-k)<b&&(g=!g)}f=h}return g},b.prototype.intersectsSegment=function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(this.intersectsSegmentPolygon(e[f],a,b,c,d))return this.boundingBoxes[f];return null},b.prototype.intersectsSegmentPolygon=function(a,b,c,d,e){for(var f=a,g=a.length,h=b-d,i=c-e,j=b*e-c*d,k=f[g-2],l=f[g-1],m=0;g>m;m+=2){var n=f[m],o=f[m+1],p=k*o-l*n,q=k-n,r=l-o,s=h*r-i*q,t=(j*q-h*p)/s;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=b&&d>=t||t>=d&&b>=t)){var u=(j*r-i*p)/s;if((u>=l&&o>=u||u>=o&&l>=u)&&(u>=c&&e>=u||u>=e&&c>=u))return!0}k=n,l=o}return!1},b.prototype.getPolygon=function(a){if(null==a)throw new Error("boundingBox cannot be null.");var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},b.prototype.getWidth=function(){return this.maxX-this.minX},b.prototype.getHeight=function(){return this.maxY-this.minY},b}();a.SkeletonBounds=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array}return a.prototype.findBone=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findBoneIndex=function(a){if(null==a)throw new Error("boneName cannot be null.");for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},a.prototype.findSlot=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findSlotIndex=function(a){if(null==a)throw new Error("slotName cannot be null.");for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},a.prototype.findSkin=function(a){if(null==a)throw new Error("skinName cannot be null.");for(var b=this.skins,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findEvent=function(a){if(null==a)throw new Error("eventDataName cannot be null.");for(var b=this.events,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findAnimation=function(a){if(null==a)throw new Error("animationName cannot be null.");for(var b=this.animations,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findIkConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findTransformConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.transformConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findPathConstraint=function(a){if(null==a)throw new Error("constraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;d>c;c++){var e=b[c];if(e.name==a)return e}return null},a.prototype.findPathConstraintIndex=function(a){if(null==a)throw new Error("pathConstraintName cannot be null.");for(var b=this.pathConstraints,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},a}();a.SkeletonData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(c){var d=this.scale,e=new a.SkeletonData,f="string"==typeof c?JSON.parse(c):c,g=f.skeleton;if(null!=g&&(e.hash=g.hash,e.version=g.spine,e.width=g.width,e.height=g.height,e.imagesPath=g.images),f.bones)for(var h=0;h<f.bones.length;h++){var i=f.bones[h],j=null,k=this.getValue(i,"parent",null);if(null!=k&&(j=e.findBone(k),null==j))throw new Error("Parent bone not found: "+k);var l=new a.BoneData(e.bones.length,i.name,j);l.length=this.getValue(i,"length",0)*d,l.x=this.getValue(i,"x",0)*d,l.y=this.getValue(i,"y",0)*d,l.rotation=this.getValue(i,"rotation",0),l.scaleX=this.getValue(i,"scaleX",1),l.scaleY=this.getValue(i,"scaleY",1),l.shearX=this.getValue(i,"shearX",0),l.shearY=this.getValue(i,"shearY",0),l.inheritRotation=this.getValue(i,"inheritRotation",!0),l.inheritScale=this.getValue(i,"inheritScale",!0),e.bones.push(l)}if(f.slots)for(var h=0;h<f.slots.length;h++){var m=f.slots[h],n=m.name,o=m.bone,p=e.findBone(o);if(null==p)throw new Error("Slot bone not found: "+o);var l=new a.SlotData(e.slots.length,n,p),q=this.getValue(m,"color",null);null!=q&&l.color.setFromString(q),l.attachmentName=this.getValue(m,"attachment",null),l.blendMode=b.blendModeFromString(this.getValue(m,"blend","normal")),e.slots.push(l)}if(f.ik)for(var h=0;h<f.ik.length;h++){for(var r=f.ik[h],l=new a.IkConstraintData(r.name),s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("IK bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findBone(u),null==l.target)throw new Error("IK target bone not found: "+u);l.bendDirection=this.getValue(r,"bendPositive",!0)?1:-1,l.mix=this.getValue(r,"mix",1),e.ikConstraints.push(l)}if(f.transform)for(var h=0;h<f.transform.length;h++){for(var r=f.transform[h],l=new a.TransformConstraintData(r.name),s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("Transform constraint bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findBone(u),null==l.target)throw new Error("Transform constraint target bone not found: "+u);l.offsetRotation=this.getValue(r,"rotation",0),l.offsetX=this.getValue(r,"x",0)*d,l.offsetY=this.getValue(r,"y",0)*d,l.offsetScaleX=this.getValue(r,"scaleX",0),l.offsetScaleY=this.getValue(r,"scaleY",0),l.offsetShearY=this.getValue(r,"shearY",0),l.rotateMix=this.getValue(r,"rotateMix",1),l.translateMix=this.getValue(r,"translateMix",1),l.scaleMix=this.getValue(r,"scaleMix",1),l.shearMix=this.getValue(r,"shearMix",1),e.transformConstraints.push(l)}if(f.path)for(var h=0;h<f.path.length;h++){for(var r=f.path[h],l=new a.PathConstraintData(r.name),s=0;s<r.bones.length;s++){var o=r.bones[s],t=e.findBone(o);if(null==t)throw new Error("Transform constraint bone not found: "+o);l.bones.push(t)}var u=r.target;if(l.target=e.findSlot(u),null==l.target)throw new Error("Path target slot not found: "+u);l.positionMode=b.positionModeFromString(this.getValue(r,"positionMode","percent")),l.spacingMode=b.spacingModeFromString(this.getValue(r,"spacingMode","length")),l.rotateMode=b.rotateModeFromString(this.getValue(r,"rotateMode","tangent")),l.offsetRotation=this.getValue(r,"rotation",0),l.position=this.getValue(r,"position",0),l.positionMode==a.PositionMode.Fixed&&(l.position*=d),l.spacing=this.getValue(r,"spacing",0),(l.spacingMode==a.SpacingMode.Length||l.spacingMode==a.SpacingMode.Fixed)&&(l.spacing*=d),l.rotateMix=this.getValue(r,"rotateMix",1),l.translateMix=this.getValue(r,"translateMix",1),e.pathConstraints.push(l)}if(f.skins)for(var v in f.skins){var w=f.skins[v],x=new a.Skin(v);for(var n in w){var y=e.findSlotIndex(n);if(-1==y)throw new Error("Slot not found: "+n);var m=w[n];for(var z in m){var A=this.readAttachment(m[z],x,y,z);null!=A&&x.addAttachment(y,z,A)}}e.skins.push(x),"default"==x.name&&(e.defaultSkin=x)}for(var h=0,B=this.linkedMeshes.length;B>h;h++){var C=this.linkedMeshes[h],x=null==C.skin?e.defaultSkin:e.findSkin(C.skin);if(null==x)throw new Error("Skin not found: "+C.skin);var D=x.getAttachment(C.slotIndex,C.parent);if(null==D)throw new Error("Parent mesh not found: "+C.parent);C.mesh.setParentMesh(D),C.mesh.updateUVs()}if(this.linkedMeshes.length=0,f.events)for(var E in f.events){var F=f.events[E],l=new a.EventData(E);l.intValue=this.getValue(F,"int",0),l.floatValue=this.getValue(F,"float",0),l.stringValue=this.getValue(F,"string",null),e.events.push(l)}if(f.animations)for(var G in f.animations){var H=f.animations[G];this.readAnimation(H,G,e)}return e},b.prototype.readAttachment=function(b,d,e,f){var g=this.scale;f=this.getValue(b,"name",f);var h=this.getValue(b,"type","region");switch(h){case"region":var i=this.getValue(b,"path",f),j=this.attachmentLoader.newRegionAttachment(d,f,i);if(null==j)return null;j.path=i,j.x=this.getValue(b,"x",0)*g,j.y=this.getValue(b,"y",0)*g,j.scaleX=this.getValue(b,"scaleX",1),j.scaleY=this.getValue(b,"scaleY",1),j.rotation=this.getValue(b,"rotation",0),j.width=b.width*g,j.height=b.height*g;var k=this.getValue(b,"color",null);return null!=k&&j.color.setFromString(k),j.updateOffset(),j;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(d,f);if(null==l)return null;this.readVertices(b,l,b.vertexCount<<1);var k=this.getValue(b,"color",null);return null!=k&&l.color.setFromString(k),l;case"mesh":case"linkedmesh":var i=this.getValue(b,"path",f),m=this.attachmentLoader.newMeshAttachment(d,f,i);if(null==m)return null;m.path=i;var k=this.getValue(b,"color",null);null!=k&&m.color.setFromString(k);var n=this.getValue(b,"parent",null);if(null!=n)return m.inheritDeform=this.getValue(b,"deform",!0),this.linkedMeshes.push(new c(m,this.getValue(b,"skin",null),e,n)),m;var o=b.uvs;return this.readVertices(b,m,o.length),m.triangles=b.triangles,m.regionUVs=o,m.updateUVs(),m.hullLength=2*this.getValue(b,"hull",0),m;case"path":var i=this.attachmentLoader.newPathAttachment(d,f);if(null==i)return null;i.closed=this.getValue(b,"closed",!1),i.constantSpeed=this.getValue(b,"constantSpeed",!0);var p=b.vertexCount;this.readVertices(b,i,p<<1);for(var q=a.Utils.newArray(p/3,0),r=0;r<b.lengths.length;r++)q[r++]=b.lengths[r]*g;i.lengths=q;var k=this.getValue(b,"color",null);return null!=k&&i.color.setFromString(k),i}return null},b.prototype.readVertices=function(b,c,d){var e=this.scale;c.worldVerticesLength=d;var f=b.vertices;if(d==f.length){if(1!=e)for(var g=0,h=f.length;h>g;g++)f[g]*=e;return void(c.vertices=a.Utils.toFloatArray(f))}for(var i=new Array,j=new Array,g=0,h=f.length;h>g;){var k=f[g++];j.push(k);for(var l=g+4*k;l>g;g+=4)j.push(f[g]),i.push(f[g+1]*e),i.push(f[g+2]*e),i.push(f[g+3])}c.bones=j,c.vertices=a.Utils.toFloatArray(i)},b.prototype.readAnimation=function(b,c,d){var e=this.scale,f=new Array,g=0;if(b.slots)for(var h in b.slots){var i=b.slots[h],j=d.findSlotIndex(h);if(-1==j)throw new Error("Slot not found: "+h);for(var k in i){var l=i[k];if("color"==k){var m=new a.ColorTimeline(l.length);m.slotIndex=j;for(var n=0,o=0;o<l.length;o++){var p=l[o],q=new a.Color;q.setFromString(p.color),m.setFrame(n,p.time,q.r,q.g,q.b,q.a),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.ColorTimeline.ENTRIES])}else{if(!(k="attachment"))throw new Error("Invalid timeline type for a slot: "+k+" ("+h+")");var m=new a.AttachmentTimeline(l.length);m.slotIndex=j;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n++,p.time,p.name)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}}}if(b.bones)for(var r in b.bones){var s=b.bones[r],t=d.findBoneIndex(r);if(-1==t)throw new Error("Bone not found: "+r);for(var k in s){var l=s[k];if("rotate"===k){var m=new a.RotateTimeline(l.length);m.boneIndex=t;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,p.angle),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.RotateTimeline.ENTRIES])}else{if("translate"!==k&&"scale"!==k&&"shear"!==k)throw new Error("Invalid timeline type for a bone: "+k+" ("+r+")");var m=null,u=1;"scale"===k?m=new a.ScaleTimeline(l.length):"shear"===k?m=new a.ShearTimeline(l.length):(m=new a.TranslateTimeline(l.length),u=e),m.boneIndex=t;for(var n=0,o=0;o<l.length;o++){var p=l[o],v=this.getValue(p,"x",0),w=this.getValue(p,"y",0);m.setFrame(n,p.time,v*u,w*u),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.TranslateTimeline.ENTRIES])}}}if(b.ik)for(var x in b.ik){var y=b.ik[x],z=d.findIkConstraint(x),m=new a.IkConstraintTimeline(y.length);m.ikConstraintIndex=d.ikConstraints.indexOf(z);for(var n=0,o=0;o<y.length;o++){var p=y[o];m.setFrame(n,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.IkConstraintTimeline.ENTRIES])}if(b.transform)for(var x in b.transform){var y=b.transform[x],z=d.findTransformConstraint(x),m=new a.TransformConstraintTimeline(y.length);m.transformConstraintIndex=d.transformConstraints.indexOf(z);for(var n=0,o=0;o<y.length;o++){var p=y[o];m.setFrame(n,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.TransformConstraintTimeline.ENTRIES])}if(b.paths)for(var x in b.paths){var y=b.paths[x],A=d.findPathConstraintIndex(x);if(-1==A)throw new Error("Path constraint not found: "+x);var B=d.pathConstraints[A];for(var k in y){var l=y[k];if("position"===k||"spacing"===k){var m=null,u=1;"spacing"===k?(m=new a.PathConstraintSpacingTimeline(l.length),(B.spacingMode==a.SpacingMode.Length||B.spacingMode==a.SpacingMode.Fixed)&&(u=e)):(m=new a.PathConstraintPositionTimeline(l.length),B.positionMode==a.PositionMode.Fixed&&(u=e)),m.pathConstraintIndex=A;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,this.getValue(p,k,0)*u),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===k){var m=new a.PathConstraintMixTimeline(l.length);m.pathConstraintIndex=A;for(var n=0,o=0;o<l.length;o++){var p=l[o];m.setFrame(n,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[(m.getFrameCount()-1)*a.PathConstraintMixTimeline.ENTRIES])}}}if(b.deform)for(var C in b.deform){var D=b.deform[C],E=d.findSkin(C);if(null==E)throw new Error("Skin not found: "+C);for(var h in D){var i=D[h],j=d.findSlotIndex(h);if(-1==j)throw new Error("Slot not found: "+i.name);for(var k in i){var l=i[k],F=E.getAttachment(j,k);if(null==F)throw new Error("Deform attachment not found: "+l.name);var G=null!=F.bones,H=F.vertices,I=G?H.length/3*2:H.length,m=new a.DeformTimeline(l.length);m.slotIndex=j,m.attachment=F;for(var n=0,J=0;J<l.length;J++){var p=l[J],K=void 0,L=this.getValue(p,"vertices",null);if(null==L)K=G?a.Utils.newFloatArray(I):H;else{K=a.Utils.newFloatArray(I);var M=this.getValue(p,"offset",0);if(a.Utils.arrayCopy(L,0,K,M,L.length),1!=e)for(var o=M,N=o+L.length;N>o;o++)K[o]*=e;if(!G)for(var o=0;I>o;o++)K[o]+=H[o]}m.setFrame(n,p.time,K),this.readCurve(p,m,n),n++}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}}}var O=b.drawOrder;if(null==O&&(O=b.draworder),null!=O){for(var m=new a.DrawOrderTimeline(O.length),P=d.slots.length,n=0,J=0;J<O.length;J++){var Q=O[J],R=null,S=this.getValue(Q,"offsets",null);if(null!=S){R=a.Utils.newArray(P,-1);for(var T=a.Utils.newArray(P-S.length,0),U=0,V=0,o=0;o<S.length;o++){var W=S[o],j=d.findSlotIndex(W.slot);if(-1==j)throw new Error("Slot not found: "+W.slot);for(;U!=j;)T[V++]=U++;R[U+W.offset]=U++}for(;P>U;)T[V++]=U++;for(var o=P-1;o>=0;o--)-1==R[o]&&(R[o]=T[--V])}m.setFrame(n++,Q.time,R)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}if(b.events){for(var m=new a.EventTimeline(b.events.length),n=0,o=0;o<b.events.length;o++){var X=b.events[o],Y=d.findEvent(X.name);if(null==Y)throw new Error("Event not found: "+X.name);var Z=new a.Event(X.time,Y);Z.intValue=this.getValue(X,"int",Y.intValue),Z.floatValue=this.getValue(X,"float",Y.floatValue),Z.stringValue=this.getValue(X,"string",Y.stringValue),m.setFrame(n++,Z)}f.push(m),g=Math.max(g,m.frames[m.getFrameCount()-1])}if(isNaN(g))throw new Error("Error while parsing animation, duration is NaN");d.animations.push(new a.Animation(c,f,g))},b.prototype.readCurve=function(a,b,c){if(a.curve)if("stepped"===a.curve)b.setStepped(c);else if("[object Array]"===Object.prototype.toString.call(a.curve)){var d=a.curve;b.setCurve(c,d[0],d[1],d[2],d[3])}},b.prototype.getValue=function(a,b,c){return void 0!==a[b]?a[b]:c},b.blendModeFromString=function(b){if(b=b.toLowerCase(),"normal"==b)return a.BlendMode.Normal;if("additive"==b)return a.BlendMode.Additive;if("multiply"==b)return a.BlendMode.Multiply;if("screen"==b)return a.BlendMode.Screen;throw new Error("Unknown blend mode: "+b)},b.positionModeFromString=function(b){if(b=b.toLowerCase(),"fixed"==b)return a.PositionMode.Fixed;if("percent"==b)return a.PositionMode.Percent;throw new Error("Unknown position mode: "+b)},b.spacingModeFromString=function(b){if(b=b.toLowerCase(),"length"==b)return a.SpacingMode.Length;if("fixed"==b)return a.SpacingMode.Fixed;if("percent"==b)return a.SpacingMode.Percent;throw new Error("Unknown position mode: "+b)},b.rotateModeFromString=function(b){if(b=b.toLowerCase(),"tangent"==b)return a.RotateMode.Tangent;if("chain"==b)return a.RotateMode.Chain;if("chainscale"==b)return a.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+b)},b}();a.SkeletonJson=b;var c=function(){function a(a,b,c,d){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d}return a}()}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){if(this.attachments=new Array,null==a)throw new Error("name cannot be null.");this.name=a}return a.prototype.addAttachment=function(a,b,c){if(null==c)throw new Error("attachment cannot be null.");var d=this.attachments;a>=d.length&&(d.length=a+1),d[a]||(d[a]={}),d[a][b]=c},a.prototype.getAttachment=function(a,b){var c=this.attachments[a];return c?c[b]:null},a.prototype.attachAll=function(a,b){for(var c=0,d=0;d<a.slots.length;d++){var e=a.slots[d],f=e.getAttachment();if(f&&c<b.attachments.length){var g=b.attachments[c];for(var h in g){var i=g[h];if(f==i){var j=this.getAttachment(c,name);null!=j&&e.setAttachment(j);
break}}}c++}},a}();a.Skin=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(b,c){if(this.attachmentVertices=new Array,null==b)throw new Error("data cannot be null.");if(null==c)throw new Error("bone cannot be null.");this.data=b,this.bone=c,this.color=new a.Color,this.setToSetupPose()}return b.prototype.getAttachment=function(){return this.attachment},b.prototype.setAttachment=function(a){this.attachment!=a&&(this.attachment=a,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},b.prototype.setAttachmentTime=function(a){this.attachmentTime=this.bone.skeleton.time-a},b.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},b.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},b}();a.Slot=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(b,c,d){if(this.color=new a.Color(1,1,1,1),0>b)throw new Error("index must be >= 0.");if(null==c)throw new Error("name cannot be null.");if(null==d)throw new Error("boneData cannot be null.");this.index=b,this.name=c,this.boneData=d}return b}();a.SlotData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){this._image=a}return a.prototype.getImage=function(){return this._image},a.filterFromString=function(a){switch(a.toLowerCase()){case"nearest":return c.Nearest;case"linear":return c.Linear;case"mipmap":return c.MipMap;case"mipmapnearestnearest":return c.MipMapNearestNearest;case"mipmaplinearnearest":return c.MipMapLinearNearest;case"mipmapnearestlinear":return c.MipMapNearestLinear;case"mipmaplinearlinear":return c.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+a)}},a.wrapFromString=function(a){switch(a.toLowerCase()){case"mirroredtepeat":return d.MirroredRepeat;case"clamptoedge":return d.ClampToEdge;case"repeat":return d.Repeat;default:throw new Error("Unknown texture wrap "+a)}},a}();a.Texture=b,function(a){a[a.Nearest=9728]="Nearest",a[a.Linear=9729]="Linear",a[a.MipMap=9987]="MipMap",a[a.MipMapNearestNearest=9984]="MipMapNearestNearest",a[a.MipMapLinearNearest=9985]="MipMapLinearNearest",a[a.MipMapNearestLinear=9986]="MipMapNearestLinear",a[a.MipMapLinearLinear=9987]="MipMapLinearLinear"}(a.TextureFilter||(a.TextureFilter={}));var c=a.TextureFilter;!function(a){a[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat"}(a.TextureWrap||(a.TextureWrap={}));var d=a.TextureWrap,e=function(){function a(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}return a}();a.TextureRegion=e}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a,b){this.pages=new Array,this.regions=new Array,this.load(a,b)}return b.prototype.load=function(b,f){if(null==f)throw new Error("textureLoader cannot be null.");for(var g=new c(b),h=new Array(4),i=null;;){var j=g.readLine();if(null==j)break;if(j=j.trim(),0==j.length)i=null;else if(i){var l=new e;l.name=j,l.page=i,l.rotate="true"==g.readValue(),g.readTuple(h);var m=parseInt(h[0]),n=parseInt(h[1]);g.readTuple(h);var o=parseInt(h[0]),p=parseInt(h[1]);l.u=m/i.width,l.v=n/i.height,l.rotate?(l.u2=(m+p)/i.width,l.v2=(n+o)/i.height):(l.u2=(m+o)/i.width,l.v2=(n+p)/i.height),l.x=m,l.y=n,l.width=Math.abs(o),l.height=Math.abs(p),4==g.readTuple(h)&&4==g.readTuple(h)&&g.readTuple(h),l.originalWidth=parseInt(h[0]),l.originalHeight=parseInt(h[1]),g.readTuple(h),l.offsetX=parseInt(h[0]),l.offsetY=parseInt(h[1]),l.index=parseInt(g.readValue()),l.texture=i.texture,this.regions.push(l)}else{i=new d,i.name=j,2==g.readTuple(h)&&(i.width=parseInt(h[0]),i.height=parseInt(h[1]),g.readTuple(h)),g.readTuple(h),i.minFilter=a.Texture.filterFromString(h[0]),i.magFilter=a.Texture.filterFromString(h[1]);var k=g.readValue();i.uWrap=a.TextureWrap.ClampToEdge,i.vWrap=a.TextureWrap.ClampToEdge,"x"==k?i.uWrap=a.TextureWrap.Repeat:"y"==k?i.vWrap=a.TextureWrap.Repeat:"xy"==k&&(i.uWrap=i.vWrap=a.TextureWrap.Repeat),i.texture=f(j),i.texture.setFilters(i.minFilter,i.magFilter),i.texture.setWraps(i.uWrap,i.vWrap),i.width=i.texture.getImage().width,i.height=i.texture.getImage().height,this.pages.push(i)}}},b.prototype.findRegion=function(a){for(var b=0;b<this.regions.length;b++)if(this.regions[b].name==a)return this.regions[b];return null},b.prototype.dispose=function(){for(var a=0;a<this.pages.length;a++)this.pages[a].texture.dispose()},b}();a.TextureAtlas=b;var c=function(){function a(a){this.index=0,this.lines=a.split(/\r\n|\r|\n/)}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readValue=function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw new Error("Invalid line: "+a);return a.substring(b+1).trim()},a.prototype.readTuple=function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw new Error("Invalid line: "+b);for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f)break;a[d]=b.substr(e,f-e).trim(),e=f+1}return a[d]=b.substring(e).trim(),d+1},a}(),d=function(){function a(){}return a}();a.TextureAtlasPage=d;var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.TextureRegion);a.TextureAtlasRegion=e}(spine||(spine={}));var spine;!function(a){var b=function(){function b(a){this.atlas=a}return b.prototype.newRegionAttachment=function(b,c,d){var e=this.atlas.findRegion(d);if(null==e)throw new Error("Region not found in atlas: "+d+" (region attachment: "+c+")");e.renderObject=e;var f=new a.RegionAttachment(c);return f.setRegion(e),f.region=e,f},b.prototype.newMeshAttachment=function(b,c,d){var e=this.atlas.findRegion(d);if(null==e)throw new Error("Region not found in atlas: "+d+" (mesh attachment: "+c+")");e.renderObject=e;var f=new a.MeshAttachment(c);return f.region=e,f},b.prototype.newBoundingBoxAttachment=function(b,c){return new a.BoundingBoxAttachment(c)},b.prototype.newPathAttachment=function(b,c){return new a.PathAttachment(c)},b}();a.TextureAtlasAttachmentLoader=b}(spine||(spine={}));var spine;!function(a){var b=function(){function b(b,c){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new a.Vector2,null==b)throw new Error("data cannot be null.");if(null==c)throw new Error("skeleton cannot be null.");this.data=b,this.rotateMix=b.rotateMix,this.translateMix=b.translateMix,this.scaleMix=b.scaleMix,this.shearMix=b.shearMix,this.bones=new Array;for(var d=0;d<b.bones.length;d++)this.bones.push(c.findBone(b.bones[d].name));this.target=c.findBone(b.target.name)}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){for(var b=this.rotateMix,c=this.translateMix,d=this.scaleMix,e=this.shearMix,f=this.target,g=f.a,h=f.b,i=f.c,j=f.d,k=this.bones,l=0,m=k.length;m>l;l++){var n=k[l];if(b>0){var o=n.a,p=n.b,q=n.c,r=n.d,s=Math.atan2(i,g)-Math.atan2(q,o)+this.data.offsetRotation*a.MathUtils.degRad;s>a.MathUtils.PI?s-=a.MathUtils.PI2:s<-a.MathUtils.PI&&(s+=a.MathUtils.PI2),s*=b;var t=Math.cos(s),u=Math.sin(s);n.a=t*o-u*q,n.b=t*p-u*r,n.c=u*o+t*q,n.d=u*p+t*r}if(c>0){var v=this.temp;f.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),n.worldX+=(v.x-n.worldX)*c,n.worldY+=(v.y-n.worldY)*c}if(d>0){var w=Math.sqrt(n.a*n.a+n.c*n.c),x=Math.sqrt(g*g+i*i),y=w>1e-5?(w+(x-w+this.data.offsetScaleX)*d)/w:0;n.a*=y,n.c*=y,w=Math.sqrt(n.b*n.b+n.d*n.d),x=Math.sqrt(h*h+j*j),y=w>1e-5?(w+(x-w+this.data.offsetScaleY)*d)/w:0,n.b*=y,n.d*=y}if(e>0){var p=n.b,r=n.d,z=Math.atan2(r,p),s=Math.atan2(j,h)-Math.atan2(i,g)-(z-Math.atan2(n.c,n.a));s>a.MathUtils.PI?s-=a.MathUtils.PI2:s<-a.MathUtils.PI&&(s+=a.MathUtils.PI2),s=z+(s+this.data.offsetShearY*a.MathUtils.degRad)*e;var y=Math.sqrt(p*p+r*r);n.b=Math.cos(s)*y,n.d=Math.sin(s)*y}}},b}();a.TransformConstraint=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){if(this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,null==a)throw new Error("name cannot be null.");this.name=a}return a}();a.TransformConstraintData=b}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.r=a,this.g=b,this.b=c,this.a=d}return a.prototype.set=function(a,b,c,d){this.r=a,this.g=b,this.b=c,this.a=d,this.clamp()},a.prototype.setFromColor=function(a){this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a},a.prototype.setFromString=function(a){a="#"==a.charAt(0)?a.substr(1):a,this.r=parseInt(a.substr(0,2),16)/255,this.g=parseInt(a.substr(2,2),16)/255,this.b=parseInt(a.substr(4,2),16)/255,this.a=(8!=a.length?255:parseInt(a.substr(6,2),16))/255},a.prototype.add=function(a,b,c,d){this.r+=a,this.g+=b,this.b+=c,this.a+=d,this.clamp()},a.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},a.WHITE=new a(1,1,1,1),a.RED=new a(1,0,0,1),a.GREEN=new a(0,1,0,1),a.BLUE=new a(0,0,1,1),a.MAGENTA=new a(1,0,1,1),a}();a.Color=b;var c=function(){function a(){}return a.clamp=function(a,b,c){return b>a?b:a>c?c:a},a.cosDeg=function(b){return Math.cos(b*a.degRad)},a.sinDeg=function(b){return Math.sin(b*a.degRad)},a.signum=function(a){return a>=0?1:-1},a.toInt=function(a){return a>0?Math.floor(a):Math.ceil(a)},a.cbrt=function(a){var b=Math.pow(Math.abs(a),1/3);return 0>a?-b:b},a.PI=3.1415927,a.PI2=2*a.PI,a.radiansToDegrees=180/a.PI,a.radDeg=a.radiansToDegrees,a.degreesToRadians=a.PI/180,a.degRad=a.degreesToRadians,a}();a.MathUtils=c;var d=function(){function a(){}return a.arrayCopy=function(a,b,c,d,e){for(var f=b,g=d;b+e>f;f++,g++)c[g]=a[f]},a.setArraySize=function(a,b,c){void 0===c&&(c=0);var d=a.length;if(d==b)return a;if(a.length=b,b>d)for(var e=d;b>e;e++)a[e]=c;return a},a.newArray=function(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=b;return c},a.newFloatArray=function(b){if(a.SUPPORTS_TYPED_ARRAYS)return new Float32Array(b);for(var c=new Array(b),d=0;d<c.length;d++)c[d]=0;return c},a.toFloatArray=function(b){return a.SUPPORTS_TYPED_ARRAYS?new Float32Array(b):b},a.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,a}();a.Utils=d;var e=function(){function a(){}return a.logBones=function(a){for(var b=0;b<a.bones.length;b++){var c=a.bones[b];console.log(c.data.name+", "+c.a+", "+c.b+", "+c.c+", "+c.d+", "+c.worldX+", "+c.worldY)}},a}();a.DebugUtils=e;var f=function(){function a(a){this.items=new Array,this.instantiator=a}return a.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},a.prototype.free=function(a){this.items.push(a)},a.prototype.freeAll=function(a){for(var b=0;b<a.length;b++)this.items[b]=a[b]},a.prototype.clear=function(){this.items.length=0},a}();a.Pool=f;var g=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)},a.prototype.normalize=function(){var a=this.length();return 0!=a&&(this.x/=a,this.y/=a),this},a}();a.Vector2=g;var h=function(){function a(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return a.prototype.update=function(){var a=Date.now()/1e3;this.delta=a-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=a,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},a}();a.TimeKeeper=h}(spine||(spine={}));var spine;!function(a){var b=function(){function a(a){if(null==a)throw new Error("name cannot be null.");this.name=a}return a}();a.Attachment=b;var c=function(a){function b(b){a.call(this,b),this.worldVerticesLength=0}return __extends(b,a),b.prototype.computeWorldVertices=function(a,b){this.computeWorldVerticesWith(a,0,this.worldVerticesLength,b,0)},b.prototype.computeWorldVerticesWith=function(a,b,c,d,e){c+=e;var f=a.bone.skeleton,g=f.x,h=f.y,i=a.attachmentVertices,j=this.vertices,k=this.bones;if(null!=k){for(var u=0,v=0,w=0;b>w;w+=2){var x=k[u];u+=x+1,v+=x}var y=f.bones;if(0==i.length)for(var r=e,n=3*v;c>r;r+=2){var z=g,A=h,x=k[u++];for(x+=u;x>u;u++,n+=3){var l=y[k[u]],s=j[n],t=j[n+1],B=j[n+2];z+=(s*l.a+t*l.b+l.worldX)*B,A+=(s*l.c+t*l.d+l.worldY)*B}d[r]=z,d[r+1]=A}else for(var C=i,r=e,n=3*v,D=v<<1;c>r;r+=2){var z=g,A=h,x=k[u++];for(x+=u;x>u;u++,n+=3,D+=2){var l=y[k[u]],s=j[n]+C[D],t=j[n+1]+C[D+1],B=j[n+2];z+=(s*l.a+t*l.b+l.worldX)*B,A+=(s*l.c+t*l.d+l.worldY)*B}d[r]=z,d[r+1]=A}}else{i.length>0&&(j=i);var l=a.bone;g+=l.worldX,h+=l.worldY;for(var m=l.a,n=l.b,o=l.c,p=l.d,q=b,r=e;c>r;q+=2,r+=2){var s=j[q],t=j[q+1];d[r]=s*m+t*n+g,d[r+1]=s*o+t*p+h}}},b.prototype.applyDeform=function(a){return this==a},b}(b);a.VertexAttachment=c}(spine||(spine={}));var spine;!function(a){!function(a){a[a.Region=0]="Region",a[a.BoundingBox=1]="BoundingBox",a[a.Mesh=2]="Mesh",a[a.LinkedMesh=3]="LinkedMesh",a[a.Path=4]="Path"}(a.AttachmentType||(a.AttachmentType={}));a.AttachmentType}(spine||(spine={}));var spine;!function(a){var b=function(b){function c(c){b.call(this,c),this.color=new a.Color(1,1,1,1)}return __extends(c,b),c}(a.VertexAttachment);a.BoundingBoxAttachment=b}(spine||(spine={}));var spine;!function(a){var b=function(b){function c(c){b.call(this,c),this.color=new a.Color(1,1,1,1),this.inheritDeform=!1,this.tempColor=new a.Color(0,0,0,0)}return __extends(c,b),c.prototype.updateUVs=function(){var b=this.regionUVs,c=b.length,d=8*(c>>1);(null==this.worldVertices||this.worldVertices.length!=d)&&(this.worldVertices=a.Utils.newFloatArray(d));var e=0,f=0,g=0,h=0;if(null==this.region?(e=f=0,g=h=1):(e=this.region.u,f=this.region.v,g=this.region.u2-e,h=this.region.v2-f),this.region.rotate)for(var i=0,j=6;c>i;i+=2,j+=8)this.worldVertices[j]=e+b[i+1]*g,this.worldVertices[j+1]=f+h-b[i]*h;else for(var i=0,j=6;c>i;i+=2,j+=8)this.worldVertices[j]=e+b[i]*g,this.worldVertices[j+1]=f+b[i+1]*h},c.prototype.updateWorldVertices=function(a,b){var c=a.bone.skeleton,d=c.color,e=a.color,f=this.color,g=d.a*e.a*f.a,h=b?g:1,i=this.tempColor;i.set(d.r*e.r*f.r*h,d.g*e.g*f.g*h,d.b*e.b*f.b*h,g);var j=c.x,k=c.y,l=a.attachmentVertices,m=this.vertices,n=this.worldVertices,o=this.bones;if(null==o){var p=m.length;l.length>0&&(m=l);var q=a.bone;j+=q.worldX,k+=q.worldY;for(var r=q.a,s=q.b,t=q.c,u=q.d,v=0,w=0;p>v;v+=2,w+=8){var x=m[v],y=m[v+1];n[w]=x*r+y*s+j,n[w+1]=x*t+y*u+k,n[w+2]=i.r,n[w+3]=i.g,n[w+4]=i.b,n[w+5]=i.a}return n}var z=c.bones;if(0==l.length)for(var w=0,v=0,s=0,A=o.length;A>v;w+=8){for(var B=j,C=k,D=o[v++]+v;D>v;v++,s+=3){var q=z[o[v]],x=m[s],y=m[s+1],E=m[s+2];B+=(x*q.a+y*q.b+q.worldX)*E,C+=(x*q.c+y*q.d+q.worldY)*E}n[w]=B,n[w+1]=C,n[w+2]=i.r,n[w+3]=i.g,n[w+4]=i.b,n[w+5]=i.a}else for(var F=l,w=0,v=0,s=0,G=0,A=o.length;A>v;w+=8){for(var B=j,C=k,D=o[v++]+v;D>v;v++,s+=3,G+=2){var q=z[o[v]],x=m[s]+F[G],y=m[s+1]+F[G+1],E=m[s+2];B+=(x*q.a+y*q.b+q.worldX)*E,C+=(x*q.c+y*q.d+q.worldY)*E}n[w]=B,n[w+1]=C,n[w+2]=i.r,n[w+3]=i.g,n[w+4]=i.b,n[w+5]=i.a}return n},c.prototype.applyDeform=function(a){return this==a||this.inheritDeform&&this.parentMesh==a},c.prototype.getParentMesh=function(){return this.parentMesh},c.prototype.setParentMesh=function(a){this.parentMesh=a,null!=a&&(this.bones=a.bones,this.vertices=a.vertices,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength)},c}(a.VertexAttachment);a.MeshAttachment=b}(spine||(spine={}));var spine;!function(a){var b=function(b){function c(c){b.call(this,c),this.closed=!1,this.constantSpeed=!1,this.color=new a.Color(1,1,1,1)}return __extends(c,b),c}(a.VertexAttachment);a.PathAttachment=b}(spine||(spine={}));var spine;!function(a){var b=function(b){function c(c){b.call(this,c),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new a.Color(1,1,1,1),this.offset=a.Utils.newFloatArray(8),this.vertices=a.Utils.newFloatArray(32),this.tempColor=new a.Color(1,1,1,1)}return __extends(c,b),c.prototype.setRegion=function(a){var b=this.vertices;a.rotate?(b[c.U2]=a.u,b[c.V2]=a.v2,b[c.U3]=a.u,b[c.V3]=a.v,b[c.U4]=a.u2,b[c.V4]=a.v,b[c.U1]=a.u2,b[c.V1]=a.v2):(b[c.U1]=a.u,b[c.V1]=a.v2,b[c.U2]=a.u,b[c.V2]=a.v,b[c.U3]=a.u2,b[c.V3]=a.v,b[c.U4]=a.u2,b[c.V4]=a.v2)},c.prototype.updateOffset=function(){var a=this.width/this.region.originalWidth*this.scaleX,b=this.height/this.region.originalHeight*this.scaleY,d=-this.width/2*this.scaleX+this.region.offsetX*a,e=-this.height/2*this.scaleY+this.region.offsetY*b,f=d+this.region.width*a,g=e+this.region.height*b,h=this.rotation*Math.PI/180,i=Math.cos(h),j=Math.sin(h),k=d*i+this.x,l=d*j,m=e*i+this.y,n=e*j,o=f*i+this.x,p=f*j,q=g*i+this.y,r=g*j,s=this.offset;s[c.OX1]=k-n,s[c.OY1]=m+l,s[c.OX2]=k-r,s[c.OY2]=q+l,s[c.OX3]=o-r,s[c.OY3]=q+p,s[c.OX4]=o-n,s[c.OY4]=m+p},c.prototype.updateWorldVertices=function(a,b){var d=a.bone.skeleton,e=d.color,f=a.color,g=this.color,h=e.a*f.a*g.a,i=b?h:1,j=this.tempColor;j.set(e.r*f.r*g.r*i,e.g*f.g*g.g*i,e.b*f.b*g.b*i,h);var k=this.vertices,l=this.offset,m=a.bone,n=d.x+m.worldX,o=d.y+m.worldY,p=m.a,q=m.b,r=m.c,s=m.d,t=0,u=0;return t=l[c.OX1],u=l[c.OY1],k[c.X1]=t*p+u*q+n,k[c.Y1]=t*r+u*s+o,k[c.C1R]=j.r,k[c.C1G]=j.g,k[c.C1B]=j.b,k[c.C1A]=j.a,t=l[c.OX2],u=l[c.OY2],k[c.X2]=t*p+u*q+n,k[c.Y2]=t*r+u*s+o,k[c.C2R]=j.r,k[c.C2G]=j.g,k[c.C2B]=j.b,k[c.C2A]=j.a,t=l[c.OX3],u=l[c.OY3],k[c.X3]=t*p+u*q+n,k[c.Y3]=t*r+u*s+o,k[c.C3R]=j.r,k[c.C3G]=j.g,k[c.C3B]=j.b,k[c.C3A]=j.a,t=l[c.OX4],u=l[c.OY4],k[c.X4]=t*p+u*q+n,k[c.Y4]=t*r+u*s+o,k[c.C4R]=j.r,k[c.C4G]=j.g,k[c.C4B]=j.b,k[c.C4A]=j.a,k},c.OX1=0,c.OY1=1,c.OX2=2,c.OY2=3,c.OX3=4,c.OY3=5,c.OX4=6,c.OY4=7,c.X1=0,c.Y1=1,c.C1R=2,c.C1G=3,c.C1B=4,c.C1A=5,c.U1=6,c.V1=7,c.X2=8,c.Y2=9,c.C2R=10,c.C2G=11,c.C2B=12,c.C2A=13,c.U2=14,c.V2=15,c.X3=16,c.Y3=17,c.C3R=18,c.C3G=19,c.C3B=20,c.C3A=21,c.U3=22,c.V3=23,c.X4=24,c.Y4=25,c.C4R=26,c.C4G=27,c.C4B=28,c.C4A=29,c.U4=30,c.V4=31,c}(a.Attachment);a.RegionAttachment=b}(spine||(spine={}));var spine;!function(a){var b;!function(b){var c=function(a){function c(c){void 0===c&&(c=""),a.call(this,function(a){return new b.ThreeJsTexture(a)},c)}return __extends(c,a),c}(a.AssetManager);b.AssetManager=c}(b=a.threejs||(a.threejs={}))}(spine||(spine={}));var spine;!function(a){var b;!function(a){var b=function(){function a(b,c){if(void 0===c&&(c=10920),this.verticesLength=0,this.indicesLength=0,c>10920)throw new Error("Can't have more than 10920 triangles per batch: "+c);var d=this.vertices=new Float32Array(c*a.VERTEX_SIZE),e=this.indices=new Uint16Array(3*c);this.mesh=b;var f=new THREE.BufferGeometry,g=this.vertexBuffer=new THREE.InterleavedBuffer(d,a.VERTEX_SIZE);g.dynamic=!0,f.addAttribute("position",new THREE.InterleavedBufferAttribute(g,3,0,!1)),f.addAttribute("color",new THREE.InterleavedBufferAttribute(g,4,3,!1)),f.addAttribute("uv",new THREE.InterleavedBufferAttribute(g,2,7,!1)),f.setIndex(new THREE.BufferAttribute(e,1)),f.getIndex().dynamic=!0,f.drawRange.start=0,f.drawRange.count=0,b.geometry=f}return a.prototype.begin=function(){this.verticesLength=0,this.indicesLength=0},a.prototype.batch=function(b,c,d){void 0===d&&(d=0);for(var e=this.verticesLength/a.VERTEX_SIZE,f=this.vertices,g=this.verticesLength,h=0;h<b.length;)f[g++]=b[h++],f[g++]=b[h++],f[g++]=d,f[g++]=b[h++],f[g++]=b[h++],f[g++]=b[h++],f[g++]=b[h++],f[g++]=b[h++],f[g++]=b[h++];this.verticesLength=g;var i=this.indices;for(g=this.indicesLength,h=0;h<c.length;g++,h++)i[g]=c[h]+e;this.indicesLength+=c.length},a.prototype.end=function(){this.vertexBuffer.needsUpdate=!0,this.vertexBuffer.updateRange.offset=0,this.vertexBuffer.updateRange.count=this.verticesLength;var a=this.mesh.geometry;a.getIndex().needsUpdate=!0,a.getIndex().updateRange.offset=0,a.getIndex().updateRange.count=this.indicesLength,a.drawRange.start=0,a.drawRange.count=this.indicesLength},a.VERTEX_SIZE=9,a}();a.MeshBatcher=b}(b=a.threejs||(a.threejs={}))}(spine||(spine={}));var spine;!function(a){var b;!function(b){var c=function(c){function d(d){c.call(this),this.zOffset=.1,this.skeleton=new a.Skeleton(d);var e=new a.AnimationStateData(d);this.state=new a.AnimationState(e);var f=this.material=new THREE.MeshBasicMaterial;f.side=THREE.DoubleSide,f.transparent=!0,f.alphaTest=.5,this.batcher=new b.MeshBatcher(this)}return __extends(d,c),d.prototype.update=function(a){var b=this.state,c=this.skeleton;b.update(a),b.apply(c),c.updateWorldTransform(),this.updateGeometry()},d.prototype.updateGeometry=function(){var h=(this.geometry,null),i=null,j=this.skeleton.drawOrder,k=this.batcher;k.begin();for(var l=0,m=this.zOffset,n=0,o=j.length;o>n;n++){var p=j[n],q=p.getAttachment(),r=null;if(q instanceof a.RegionAttachment){var s=q;h=s.updateWorldVertices(p,!1),i=d.QUAD_TRIANGLES,r=s.region.renderObject.texture}else{if(!(q instanceof a.MeshAttachment))continue;var t=q;h=t.updateWorldVertices(p,!1),i=t.triangles,r=t.region.renderObject.texture}if(null!=r){if(!this.material.map){var u=this.material;u.map=r.texture,u.needsUpdate=!0}this.batcher.batch(h,i,l),l+=m}}k.end()},d.createMesh=function(a){var b=new THREE.BufferGeometry,c=new Float32Array(1024);c.set([-200,-200,1,0,0,1,0,0,200,-200,0,1,0,1,1,0,200,200,0,0,1,1,1,1,-200,200,1,1,0,.1,0,1],0);var d=new THREE.InterleavedBuffer(c,8),e=new THREE.InterleavedBufferAttribute(d,2,0,!1);b.addAttribute("position",e);var f=new THREE.InterleavedBufferAttribute(d,4,2,!1);b.addAttribute("color",f);new THREE.InterleavedBufferAttribute(d,2,6,!1);b.addAttribute("uv",f);var h=new Uint16Array(1024);h.set([0,1,2,2,3,0],0),b.setIndex(new THREE.BufferAttribute(h,1)),b.drawRange.start=0,b.drawRange.count=6;var i=new THREE.MeshBasicMaterial;i.vertexColors=THREE.VertexColors,i.transparent=!0,i.map=a;var j=new THREE.Mesh(b,i);return j},d.QUAD_TRIANGLES=[0,1,2,2,3,0],d}(THREE.Mesh);b.SkeletonMesh=c}(b=a.threejs||(a.threejs={}))}(spine||(spine={}));var spine;!function(a){var b;!function(b){var c=function(b){function c(a){b.call(this,a),this.texture=new THREE.Texture(a),this.texture.flipY=!1,this.texture.needsUpdate=!0}return __extends(c,b),c.prototype.setFilters=function(a,b){this.texture.minFilter=c.toThreeJsTextureFilter(a),this.texture.magFilter=c.toThreeJsTextureFilter(b)},c.prototype.setWraps=function(a,b){this.texture.wrapS=c.toThreeJsTextureWrap(a),this.texture.wrapT=c.toThreeJsTextureWrap(b)},c.prototype.dispose=function(){this.texture.dispose()},c.toThreeJsTextureFilter=function(b){if(b===a.TextureFilter.Linear)return THREE.LinearFilter;if(b===a.TextureFilter.MipMap)return THREE.LinearMipMapLinearFilter;if(b===a.TextureFilter.MipMapLinearLinear)return THREE.LinearMipMapLinearFilter;if(b===a.TextureFilter.MipMapLinearNearest)return THREE.LinearMipMapNearestFilter;if(b===a.TextureFilter.MipMapNearestLinear)return THREE.NearestMipMapLinearFilter;if(b===a.TextureFilter.MipMapNearestNearest)return THREE.NearestMipMapNearestFilter;if(b===a.TextureFilter.Nearest)return THREE.NearestFilter;throw new Error("Unknown texture filter: "+b)},c.toThreeJsTextureWrap=function(b){if(b===a.TextureWrap.ClampToEdge)return THREE.ClampToEdgeWrapping;if(b===a.TextureWrap.MirroredRepeat)return THREE.MirroredRepeatWrapping;if(b===a.TextureWrap.Repeat)return THREE.RepeatWrapping;throw new Error("Unknown texture wrap: "+b)},c}(a.Texture);b.ThreeJsTexture=c}(b=a.threejs||(a.threejs={}))}(spine||(spine={}));